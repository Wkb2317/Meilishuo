(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ab00994"],{"000a":function(t,e,i){"use strict";i("7a6c")},"0c23":function(t,e,i){"use strict";i("937d")},1148:function(t,e,i){"use strict";var s=i("a691"),a=i("1d80");t.exports=function(t){var e=String(a(this)),i="",n=s(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(i+=e);return i}},"22f4":function(t,e,i){"use strict";i("46a9")},"295a":function(t,e,i){},"408a":function(t,e,i){var s=i("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=s(t))throw TypeError("Incorrect invocation");return+t}},"46a9":function(t,e,i){},"6ab7":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"detail"}},[i("detail-nav-bar",{ref:"detailNavBar",staticClass:"detail-nav-bar",attrs:{title:t.title,iid:t.iid,top:t.top,topY:t.topY},on:{titleClick:t.titleClick}}),i("scroll",{ref:"scroll",staticClass:"detailContent",attrs:{probeType:3,pullUpLoad:!0},on:{scroll:t.detailScroll}},[i("detail-swiper",{attrs:{detailswiper:t.detailswiper},on:{detailSwiperImgLoad:t.detailSwiperImgLoad}}),i("detail-base-info",{attrs:{goods:t.goods}}),i("detail-shop-info",{attrs:{shop:t.shop}}),i("detail-images-info",{ref:"imgTop",attrs:{"images-info":t.detailsInfo},on:{imgLoad:t.imgLoad}}),i("detail-param-info",{attrs:{paramInfo:t.paramInfo}}),i("detail-comment-info",{ref:"commentTop",attrs:{commentInfo:t.commentInfo}}),i("goods-list",{ref:"goodsTop",attrs:{goods:t.recommends}})],1),i("detail-buttom-bar",{nativeOn:{click:function(e){return t.addcart.apply(null,arguments)}}}),t.isShowBackTop?i("back-top",{nativeOn:{click:function(e){return t.backtopClick.apply(null,arguments)}}}):t._e()],1)},a=[];i("a9e3");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i("b0c0");var o=i("1bab");function c(t){return Object(o["a"])({url:"/detail",params:{iid:t}})}function r(){return Object(o["a"])({url:"/recommend"}).catch((function(t){return t}))}var l=function t(e,i,s){n(this,t),this.title=e.title,this.desc=e.desc,this.newPrice=e.price,this.lowNowPrice=e.lowNowPrice,this.oldPrice=e.oldPrice,this.discount=e.discountDesc,this.discountBgColor=e.discountBgColor,this.columns=i,this.services=s,this.nowPrice=e.highNowPrice},d=function t(e){n(this,t),this.logo=e.shopLogo,this.name=e.name,this.fans=e.cFans,this.sells=e.cSells,this.score=e.score,this.goodsCount=e.cGoods},f=function t(e,i){n(this,t),this.image=e.images?e.images[0]:"",this.infos=e.set,this.sizes=i.tables},u=i("eecb"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"detailnavbar"}},[s("nav-bar",[s("div",{staticClass:"backimg",attrs:{slot:"left"},on:{click:t.backclick},slot:"left"},[s("img",{attrs:{src:i("7a74"),alt:""}})]),s("div",{staticClass:"title",attrs:{slot:"center"},slot:"center"},t._l(t.title,(function(e,i){return s("span",{staticClass:"titleitem",class:{active:i==t.currentindex},on:{click:function(e){return t.titleclick(i)}}},[t._v(t._s(e))])})),0)])],1)},p=[],h=i("a7ac"),v={components:{NavBar:h["a"]},name:"DetailNavBar",props:{title:Array,iid:String,top:{type:Number,default:0},topY:{type:Array,default:function(){return[]}}},data:function(){return{currentindex:0}},computed:{},methods:{titleclick:function(t){this.currentindex=t,console.log("click index : "+t),this.$emit("titleClick",t)},backclick:function(){this.$router.back()}},created:function(){}},g=v,_=(i("000a"),i("2877")),b=Object(_["a"])(g,m,p,!1,null,"91f2aea8",null),C=b.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("swiper",{staticClass:"detail-swiper"},t._l(t.detailswiper,(function(e,s){return i("swiper-item",[i("img",{attrs:{src:e,alt:""},on:{load:function(e){return t.detailSwiperImgLoad(s)}}})])})),1)},w=[],k=i("dc2c"),y={name:"DetailSwiper",data:function(){return{}},props:{detailswiper:{type:Array,default:function(){return[]}}},components:{Swiper:k["a"],SwiperItem:k["b"]},methods:{detailSwiperImgLoad:function(t){t==this.detailswiper.length-1&&this.$emit("detailSwiperImgLoad")}}},x=y,$=(i("dffe"),Object(_["a"])(x,I,w,!1,null,"48600bff",null)),O=$.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 0!==Object.keys(t.goods).length?i("div",{staticClass:"baseinfo"},[i("div",{staticClass:"infotitle"},[i("span",[t._v(t._s(t.goods.title))])]),i("div",{staticClass:"infoprice"},[i("span",{staticClass:"now-price"},[t._v("￥"+t._s(t.goods.nowPrice))]),i("span",{staticClass:"old-price"},[t._v(t._s(t.goods.oldPrice))]),i("span",{staticClass:"discount",style:{background:t.goods.discountBgColor}},[t._v(t._s(t.goods.discount))])]),i("div",{staticClass:"columns"},t._l(t.goods.columns,(function(e){return i("span",[t._v(t._s(e))])})),0),i("div",{staticClass:"service"},t._l(t.goods.services.length-1,(function(e){return t.goods.services[e-1].icon?i("span",{key:e,staticClass:"info-service-item"},[i("img",{attrs:{src:t.goods.services[e-1].icon,alt:""}}),i("span",[t._v(t._s(t.goods.services[e-1].name))])]):t._e()})),0)]):t._e()},j=[],B={name:"DetailBaseInfo",props:{goods:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{}},D=B,L=(i("fa4d"),Object(_["a"])(D,S,j,!1,null,"9f3acecc",null)),E=L.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 0!==Object.keys(t.shop).length?i("div",{staticClass:"shop-info"},[i("div",{staticClass:"shop-top"},[t.shop.logo?i("img",{attrs:{src:t.shop.logo,alt:""}}):t._e(),i("span",{staticClass:"title"},[t._v(t._s(t.shop.name))])]),i("div",{staticClass:"shop-middle"},[i("div",{staticClass:"shop-middle-item shop-middle-left"},[i("div",{staticClass:"info-sells"},[i("div",{staticClass:"sells-count"},[t._v(" "+t._s(t._f("sellCountFilter")(t.shop.sells))+" ")]),i("div",{staticClass:"sells-text"},[t._v("总销量")])]),i("div",{staticClass:"info-goods"},[i("div",{staticClass:"goods-count"},[t._v(" "+t._s(t.shop.goodsCount)+" ")]),i("div",{staticClass:"goods-text"},[t._v("全部宝贝")])])]),i("div",{staticClass:"shop-middle-item shop-middle-right"},[i("table",t._l(t.shop.score,(function(e,s){return i("tr",{key:s},[i("td",[t._v(t._s(e.name))]),i("td",{staticClass:"score",class:{"score-better":e.isBetter}},[t._v(" "+t._s(e.score)+" ")]),i("td",{staticClass:"better",class:{"better-more":e.isBetter}},[i("span",[t._v(t._s(e.isBetter?"高":"低"))])])])})),0)])]),t._m(0)]):t._e()},N=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shop-bottom"},[i("div",{staticClass:"enter-shop"},[t._v("进店逛逛")])])}],T=(i("b680"),{name:"DetailShopInfo",props:{shop:{type:Object,default:function(){return{}}}},filters:{sellCountFilter:function(t){return t<1e4?t:(t/1e4).toFixed(1)+"万"}}}),P=T,F=(i("22f4"),Object(_["a"])(P,Y,N,!1,null,"41648eee",null)),A=F.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[0!==Object.keys(t.imagesInfo).length?i("div",{staticClass:"image-info"},[i("div",{staticClass:"info-desc clear-fix"},[i("div",{staticClass:"start"}),i("div",{staticClass:"desc"},[t._v(t._s(t.imagesInfo.desc))]),i("div",{staticClass:"end"})]),t._l(t.imagesInfo.detailImage,(function(e,s){return i("div",{key:s},[i("div",{staticClass:"info-key"},[t._v(t._s(e.key))]),i("div",{staticClass:"info-list"},t._l(e.list,(function(e,s){return i("img",{key:s,attrs:{src:e,alt:""},on:{load:t.imgLoad}})})),0)])}))],2):t._e()])},R=[],z={name:"DetailImagesInfo",data:function(){return{count:0,imagesLength:0}},props:{imagesInfo:{type:Object,default:function(){return{}}}},methods:{imgLoad:function(){++this.count===this.imagesLength&&this.$emit("imgLoad")}},watch:{imagesInfo:function(){this.imagesLength=this.imagesInfo.detailImage[0].list.length}},mounted:function(){}},G=z,J=(i("ac5d"),Object(_["a"])(G,M,R,!1,null,"7a03c3fa",null)),U=J.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[0!==Object.keys(t.commentInfo).length?i("div",{staticClass:"comment-info"},[t._m(0),i("div",{staticClass:"info-user"},[i("img",{attrs:{src:t.commentInfo.user.avatar,alt:""}}),i("span",[t._v(t._s(t.commentInfo.user.uname))])]),i("div",{staticClass:"info-detail"},[i("p",[t._v(t._s(t.commentInfo.content))]),i("div",{staticClass:"info-other"},[i("span",{staticClass:"date"},[t._v(t._s(t._f("showDate")(t.commentInfo.created)))]),i("span",[t._v(t._s(t.commentInfo.style))])]),i("div",{staticClass:"info-imgs"},t._l(t.commentInfo.images,(function(t,e){return i("img",{key:e,attrs:{src:t,alt:""}})})),0)])]):i("div",{staticClass:"comment-info",staticStyle:{color:"red"}},[t._v("暂无用户评论")])])},W=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"info-header"},[i("div",{staticClass:"header-title"},[t._v("用户评价")]),i("div",{staticClass:"header-more"},[t._v(" 更多 "),i("i",{staticClass:"arrow-right"})])])}],X=i("90b9"),q={name:"DetailCommentInfo",props:{commentInfo:{type:Object}},filters:{showDate:function(t){var e=new Date(1e3*t);return Object(X["b"])(e,"yyyy-MM-dd hh:mm")}}},H=q,K=(i("b096"),Object(_["a"])(H,V,W,!1,null,"ad584e46",null)),Q=K.exports,Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 0!==Object.keys(t.paramInfo).length?i("div",{staticClass:"param-info"},[i("p",[t._v("参数信息")]),t._l(t.paramInfo.sizes,(function(e,s){return i("table",{key:s,staticClass:"info-size"},t._l(e,(function(e,s){return i("tr",{key:s},t._l(e,(function(e,s){return i("td",{key:s},[t._v(t._s(e))])})),0)})),0)})),i("table",{staticClass:"info-param"},t._l(t.paramInfo.infos,(function(e,s){return i("tr",{key:s},[i("td",{staticClass:"info-param-key"},[t._v(t._s(e.key))]),i("td",{staticClass:"param-value"},[t._v(t._s(e.value))])])})),0),0!==t.paramInfo.image.length?i("div",{staticClass:"info-img"},[i("img",{attrs:{src:t.paramInfo.image,alt:""}})]):t._e()],2):t._e()},tt=[],et={name:"DetailParamInfo",props:{paramInfo:{type:Object,default:function(){return{}}}}},it=et,st=(i("e3e2"),Object(_["a"])(it,Z,tt,!1,null,"4059b8cc",null)),at=st.exports,nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"DetailButtomBar"},[t._m(0),i("div",{staticClass:"bottom-right"},[i("div",{staticClass:"addcart",on:{click:t.addcart}},[t._v("加入购物车")]),i("div",{staticClass:"buy",on:{click:t.buyClick}},[t._v("购买")])])])},ot=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"buttom-left"},[i("div",{staticClass:"service"},[i("div",{staticClass:"serviceicon"}),i("span",[t._v("客服")])]),i("div",{staticClass:"shop"},[i("div",{staticClass:"shopicon"}),i("span",[t._v("商店")])]),i("div",{staticClass:"collect"},[i("div",{staticClass:"collecticon"}),i("span",[t._v("收藏")])])])}],ct={name:"DetailButtomBar",data:function(){return{}},methods:{addcart:function(){this.$emit("addcart")},buyClick:function(){this.$router.push("/cart")}}},rt=ct,lt=(i("0c23"),Object(_["a"])(rt,nt,ot,!1,null,"d4d9e4c0",null)),dt=lt.exports,ft=i("5d17"),ut=i("d444"),mt={name:"Detail",data:function(){return{iid:null,title:["商品","参数","评论","推荐"],detailswiper:[],goods:{},shop:{},detailsInfo:{},paramInfo:{},commentInfo:{},recommends:{},topY:[0],top:0,activeIndex:0}},components:{DetailNavBar:C,DetailSwiper:O,DetailBaseInfo:E,DetailShopInfo:A,DetailImagesInfo:U,DetailCommentInfo:Q,DetailParamInfo:at,Scroll:ft["a"],GoodsList:ut["a"],DetailButtomBar:dt},methods:{imgLoad:function(){console.log("detailImageRefresh"),this.$refs.scroll.refresh(),this.topY[this.topY.length]=-this.$refs.commentTop.$el.offsetTop,this.topY[this.topY.length]=-this.$refs.goodsTop.$el.offsetTop,this.topY[this.topY.length]=-Number.MAX_VALUE},detailSwiperImgLoad:function(){this.topY[this.topY.length]=-this.$refs.imgTop.$el.offsetTop},titleClick:function(t){this.$refs.scroll.backtop(0,this.topY[t])},detailScroll:function(t){for(var e in this.top=t,this.top>-800?this.isShowBackTop=!1:this.isShowBackTop=!0,this.topY)e=parseInt(e),this.activeIndex!=e&&this.top<=this.topY[e]&&this.top>this.topY[e+1]&&(this.activeIndex=e,this.$refs.detailNavBar.currentindex=e)},addcart:function(){var t=this,e={};e.image=this.detailswiper[0],e.title=this.goods.title,e.price=this.goods.lowNowPrice,e.iid=this.iid,e.count=1,e.checked=!0,this.$store.dispatch("addCart",e).then((function(e){t.$toast.show(e,1e3)}))}},created:function(){var t=this;this.iid=this.$route.params.iid,c(this.iid).then((function(e){var i=e.data.result;console.log(i),t.detailswiper=i.itemInfo.topImages,t.goods=new l(i.itemInfo,i.columns,i.shopInfo.services),t.shop=new d(i.shopInfo),t.detailsInfo=i.detailInfo,t.paramInfo=new f(i.itemParams.info,i.itemParams.rule||{}),0!==i.rate.cRate&&(t.commentInfo=i.rate.list[0]||{})})),r().then((function(e){t.recommends=e.data.data.list}))},mixins:[u["b"],u["a"]],mounted:function(){}},pt=mt,ht=(i("d212"),Object(_["a"])(pt,s,a,!1,null,"5ef021b4",null));e["default"]=ht.exports},"7a6c":function(t,e,i){},"7a74":function(t,e,i){t.exports=i.p+"img/back.0e50089f.svg"},8646:function(t,e,i){},"937d":function(t,e,i){},ac5d:function(t,e,i){"use strict";i("295a")},b096:function(t,e,i){"use strict";i("c069")},b413:function(t,e,i){},b4b2:function(t,e,i){},b680:function(t,e,i){"use strict";var s=i("23e7"),a=i("a691"),n=i("408a"),o=i("1148"),c=i("d039"),r=1..toFixed,l=Math.floor,d=function(t,e,i){return 0===e?i:e%2===1?d(t,e-1,i*t):d(t*t,e/2,i)},f=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},u=function(t,e,i){var s=-1,a=i;while(++s<6)a+=e*t[s],t[s]=a%1e7,a=l(a/1e7)},m=function(t,e){var i=6,s=0;while(--i>=0)s+=t[i],t[i]=l(s/e),s=s%e*1e7},p=function(t){var e=6,i="";while(--e>=0)if(""!==i||0===e||0!==t[e]){var s=String(t[e]);i=""===i?s:i+o.call("0",7-s.length)+s}return i},h=r&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){r.call({})}));s({target:"Number",proto:!0,forced:h},{toFixed:function(t){var e,i,s,c,r=n(this),l=a(t),h=[0,0,0,0,0,0],v="",g="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return String(r);if(r<0&&(v="-",r=-r),r>1e-21)if(e=f(r*d(2,69,1))-69,i=e<0?r*d(2,-e,1):r/d(2,e,1),i*=4503599627370496,e=52-e,e>0){u(h,0,i),s=l;while(s>=7)u(h,1e7,0),s-=7;u(h,d(10,s,1),0),s=e-1;while(s>=23)m(h,1<<23),s-=23;m(h,1<<s),u(h,1,1),m(h,2),g=p(h)}else u(h,0,i),u(h,1<<-e,0),g=p(h)+o.call("0",l);return l>0?(c=g.length,g=v+(c<=l?"0."+o.call("0",l-c)+g:g.slice(0,c-l)+"."+g.slice(c-l))):g=v+g,g}})},b681:function(t,e,i){},c069:function(t,e,i){},d212:function(t,e,i){"use strict";i("8646")},dffe:function(t,e,i){"use strict";i("b681")},e3e2:function(t,e,i){"use strict";i("b4b2")},fa4d:function(t,e,i){"use strict";i("b413")}}]);
//# sourceMappingURL=chunk-9ab00994.fe2a8609.js.map