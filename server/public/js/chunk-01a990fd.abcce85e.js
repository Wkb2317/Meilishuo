(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01a990fd"],{"9ed6":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"login"},[t("nav-bar",{staticClass:"navbar"},[t("div",{attrs:{slot:"center"},slot:"center"},[e._v("登录")])]),t("div",{staticClass:"loginwrapper"},[t("van-form",{on:{submit:e.onSubmit}},[t("van-field",{attrs:{name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.username,callback:function(a){e.username=a},expression:"username"}}),t("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("登录")])],1)],1),t("div",{staticClass:"register",on:{click:function(a){return e.register()}}},[e._v("注册")])],1)],1)},n=[],s=t("1da1"),o=(t("e7e5"),t("d399")),c=(t("96cf"),t("ac1f"),t("5319"),t("a7ac")),i=t("bc3a"),u=t.n(i),l=t("2b0e");l["a"].use(o["a"]);var d={name:"Login",components:{NavBar:c["a"]},data:function(){return{username:"",password:""}},methods:{onSubmit:function(e){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,u()({url:"//localhost:3000/login",method:"post",data:e});case 3:r=t.sent,t.t0=r.data.code,t.next=0===t.t0?7:1===t.t0?9:14;break;case 7:return o["a"].fail("账号密码错误"),t.abrupt("break",15);case 9:return o["a"].success("登录成功"),localStorage.setItem("token",r.data.token),a.$store.dispatch("getUserInfo",{username:e.username}),a.$router.replace("/profile"),t.abrupt("break",15);case 14:return t.abrupt("break",15);case 15:case"end":return t.stop()}}),t)})))()},register:function(){this.$router.replace("/register")}}},p=d,b=(t("b600"),t("2877")),m=Object(b["a"])(p,r,n,!1,null,"db6ade08",null);a["default"]=m.exports},af23:function(e,a,t){},b600:function(e,a,t){"use strict";t("af23")}}]);
//# sourceMappingURL=chunk-01a990fd.abcce85e.js.map